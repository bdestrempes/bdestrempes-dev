---
import BlogCard from '@/components/BlogCard.astro'
import Container from '@/components/Container.astro'
import Link from '@/components/Link.astro'
import { buttonVariants } from '@/components/ui/button'
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card'
import { SITE } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { getCollection } from 'astro:content'
import 'rehype-callouts/theme/github'

const blog = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE)
---

<Layout title="Home" description={SITE.DESCRIPTION}>
  <Container class="flex flex-col gap-y-6">
    <section>
      <Card>
        <CardHeader>
          <CardTitle className="text-3xl">ğŸ‘‹ Hey, I'm Ben</CardTitle>
          <CardDescription
            >Senior Developer @ <span class="font-semibold"
              ><Link href="https://shopify.com" external underline>Shopify</Link
              ></span
            ></CardDescription
          >
        </CardHeader>
        <CardContent>
          <p class="mb-2 text-sm text-muted-foreground">
            ğŸ‘¨â€ğŸ’» I'm a senior frontend developer based in Saguenay, Quebec. With a
            strong background in web development, I specialize in building
            modern, performant web applications. Currently, I'm focused on
            e-commerce solutions at <Link
              href="https://shopify.com"
              external
              underline>Shopify</Link
            >, where I work on creating exceptional developer and merchant
            experiences.
          </p>
          <p class="text-sm text-muted-foreground">
            ğŸ”ï¸ When I'm not coding, you can find me skiing or mountain biking
            all around the world. ğŸŒ I'm passionate about modern web frameworks,
            developer tooling, and creating content to share knowledge with the
            developer community. Check out my <Link
              href="/blog"
              class="text-foreground"
              underline>blog</Link
            > for technical insights and development tips!
          </p>
        </CardContent>
      </Card>
    </section>
    <section class="flex flex-col gap-y-4">
      <h2 class="text-2xl font-bold">Latest posts</h2>
      <ul class="not-prose flex flex-col gap-y-4">
        {
          blog.map((post) => (
            <li>
              <BlogCard entry={post} />
            </li>
          ))
        }
      </ul>
      <div class="flex justify-center">
        <Link
          href="/blog"
          class={buttonVariants({ variant: 'ghost' }) + ' group'}
        >
          See all posts <span
            class="ml-1.5 transition-transform group-hover:translate-x-1"
            >&rarr;</span
          >
        </Link>
      </div>
    </section>
  </Container>
</Layout>
